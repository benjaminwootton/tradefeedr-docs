= Swaps Execution History

== Introduction
The `v1/fx/rfq-swaps/execution-history` endpoint allows the user to query all trading events for RFQ swaps. It should be used when you require a detailed analysis and understanding of the execution. 
The endpoint allows selection of multiple metrics (fields) such as `NearPrice`, `FarPrice`, `NumLPs` etc. 

== API Specification

The API endpoint requires a JSON object representing query logic similar to SQL and containing the following fields:

* `select`  - which fields should be returned in the end result. For example `BestBid`
* `filter`  - how the underlying data should be filtered

== Example 
**Note**: For display purposes we have limited the number of rows to 5 and and columns to 10.

=== Select Metrics (Fields) for a Date Range
---

====
[source,python]
----
include::example$api_rfq/swaps/execution_history/api_rfq_swaps_execution_history.py[]
----
====

==== Results
---
image::api_rfq/swaps/execution_history/api_rfq_swaps_execution_history_ex1.png["api_rfq_swaps_execution_history_ex1.png"]

==== Figure
---

====
[source,python]
----
include::example$api_rfq/swaps/execution_history/api_rfq_swaps_execution_history_ex1_fig.py[]
----
====


++++
<div id='chart1'></div>
<script>
	d3.csv("../_attachments/api_rfq/swaps/execution_history/raw/api_rfq_swaps_execution_history_ex1.csv").then((data) => {
    
var selected = 'AUDUSD';
		const data_audusd = data.filter(({
		  Symbol
		}) => selected.includes(Symbol));    
		var trace1 = [{
				x: data_audusd.map((row) => row.TradeTime),
				y: data_audusd.map((row) => row.NearTradeQuantity),
                mode: 'markers',
				type: 'scatter',
				name: 'AUDUSD'
		}]
		
        
var selected = 'EURUSD';
		const data_eurusd = data.filter(({
		  Symbol
		}) => selected.includes(Symbol));    
		var trace2 = [{
				x: data_eurusd.map((row) => row.TradeTime),
				y: data_eurusd.map((row) => row.NearTradeQuantity),
                mode: 'markers',
				type: 'scatter',
				name: 'EURUSD'
		}]
		

var selected = 'GBPUSD';
		const data_gbpusd = data.filter(({
		  Symbol
		}) => selected.includes(Symbol));    
		var trace3 = [{
				x: data_gbpusd.map((row) => row.TradeTime),
				y: data_gbpusd.map((row) => row.NearTradeQuantity),
                mode: 'markers',
				type: 'scatter',
				name: 'GBPUSD'
		}]
		


var selected = 'USDJPY';
		const data_usdjpy = data.filter(({
		  Symbol
		}) => selected.includes(Symbol));    
		var trace4 = [{
				x: data_usdjpy.map((row) => row.TradeTime),
				y: data_usdjpy.map((row) => row.NearTradeQuantity),
                mode: 'markers',
				type: 'scatter',
				name: 'USDJPY'
		}]
		

		var char_data = trace1.concat(trace2, trace3, trace4); 
		
		var layout = {
					title: 'NearTradeQuantity by TradeTime and Symbol',
					showlegend: true,
					width: 750,
					height: 500,
                    xaxis: {
                        title: {
                          text: 'Date'
                          }
                        },
                   
                  yaxis: {
                    title: {
                      text: 'TradeQuantity'
                      }
                    }                        
					};                      

		var output_div = document.getElementById('chart1')
		Plotly.newPlot(output_div, char_data, layout, { margin: { t: 0 } },{displayModeBar: false})
	})
</script>
++++

== Field Definitions

[%header,format=csv, cols=["60%", "40%"]]
|===
include::example$api_rfq/swaps/execution_history/rfq_field_definitions_execution_history.csv[]
|===