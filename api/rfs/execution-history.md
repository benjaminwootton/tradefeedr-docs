# Execution History

## Introduction

The `v1/fx/rfs/execution-history` endpoint is used when you require a detailed analysis and understanding of a specific trading `Date`. The endpoint allows for the selection of multiple metrics (fields) such as markouts at various time points, `Price`,  `OrderStatus`, `spreadPnL` and  `TradeQuantityUSD`.

## API Specification

The API endpoint requires a JSON object representing query logic similar to SQL and containing the following fields:

- `select`  - which fields should be returned in the end result. For example `SpreadPnL`
- `filter`  - how the underlying data should be filtered

**Note:** `Date` is the only valid filter field for this endpoint and it should be a specific date and not a range of days.

## API Field Descriptions 

## Example 

**Note**: For display purposes we have limited the number of rows to 5 and and columns to 10.

### Execution History for a ParentOrderID

```python
```
## tradefeedr library
from tradefeedr_public_content.v1.generic.tradefeedr_api import TradefeedrApi

## need pandas to translate JSON results from API
import pandas as pd

## create API object
tf_api_object = TradefeedrApi(demo=True)

## options
options =  {
    "select":["TradeTime",
              "OrderStatus",
              "TradeQuantityUSD",
              "Symbol",
              "Side",
              "Price",
              "SpreadPnL",
              "DecayNeg10s",
              "DecayPMNeg10s",
              "Mid0",
              "Decay30s",
              "DecayPM30s"
             ],
    "filter":[
        {"function":"eq","var":"Date","par":"2017-02-02"},
    ]
}

# this is api end-point which returns execution history
endpoint =  "v1/fx/rfs/execution-history"

## call the API
response = tf_api_object.query_api(endpoint, options)

## translate API result into pandas dataframe
data_frame = pd.DataFrame(response["result"])

## translate TradeTime to human readable time
data_frame["TradeTime"] = pd.to_datetime(data_frame["TradeTime"], unit="ms" if str(data_frame["TradeTime"].dtype) == "int64" else None)

# data_frame = data_frame.set_index("TradeTime")
data_frame
```
```
#### Results

![api_rfs_execution_history_ex.png](assets/images/api_rfs/execution_history/api_rfs_execution_history_ex.png)

#### Figure

```python
```
# import plotly libary
import plotly.express as px

# Plot figure
fig = px.scatter(data_frame, x="TradeTime", y="TradeQuantityUSD",
                 title="Volume Traded by TradeTime", color="Symbol")

fig.show()
```
```
## Field Definitions

Refer to [Analytics RFS](../analytics/rfs.md) page for details and formula.

```csv
Name,Description
SizeBucket ,"Translation of TradeQuantityUSD into USD size bucket in human readable format like  0-1=, 1-3,  3-5, 5-10 etc 0-1 means that the TradeQuantityUSD is between 0 and $1mil etc "
Date,Date corresponding to TradeTime
TradeTime,TradeTime - Time (GMT) when the trade was filled
Symbol,Currency pair. For example EURUSD.
Side,"Trade side. ""B” for buy and ""S” for sell."
Price,Execution Price for child fills.
TradeID,"Unique identifier for a trading event. Event can fill, order submission, reject or other event related to trading workflow"
TradeQuantity,Traded quantity expressed in TradeCurrency
TradeCcy,"Denomination Currency for TradeQuantity and OrderQuantity. For example
    EUR."
ExecVenue,Execution Venue where the execution is taking place
LP,Executing LP - counterparty to the trade.
LPStream,Pricing Stream of Executing LP. For example No-Last-look
LiqPool,"Pool executing LP belongs to. Typically, liquidity pool is a group of LP aggregated according to some common logic by the end user."
ArrivalTime,ArrivalTime is the time when trade request was sent. It is GMT time
QuoteTime,The time of the quote as labelled by executing LP. Quote time should generally be before the Arrival Time.
AlgoName,Name of the Algo.
ParentChild,"Equal to either =""Parent"" or ""Child""  and determines whether the rows is ""Parent"" or ""Child"" row. ""Parent rows are the events generated by a sweep order, and the child row reflect the fills."
OrderQuantity,"Total  quantity ordered. For example: 10,000,000. In units of TradeCurrency"
OrderStatus,"Status of an order it can be fill ""F"", reject ""R"", submitted ""S"" or cancelled ""C"""
OrderType,For Child rows and fills it is normally Passive/Active/Mid or Limit/Market classification
OrderPrice,Price of the order. Typical observed screen prices at the time of order placement. Useful to access the slippage.
OrderTTL,"Normally for  Child rows. FOK (Fill or Kill), AON, IOC, GTC, GTD"
LimitPrice,"For ""Parent” rows it the limit price as instructed by algo. For ""Child” rows it is the whatever is the LimitPrice submitted by AlgoVendor while trading on an ECN"
ParentOrderID,ParentOrderID for each order. Globally unique to each submitting LP
ParentOrderID2,Sub ID relating to the ParentOrderID used in sweep orders
Account,Name of the underlying client this ParentOrderID executed on behalf of
SubAccount,SubAccount associated with this ParentOrderID
TradeReason,"Any descriptive Trade Reason. Stop, Internal, External, RiskOverflow etc. User specific"
Trader,The name of a trader associated with this ParentOrderID
BaseCcy,The base currency of the pair
TradeQuantityBase,TradeQuantity in the base currency of the Symbol
MidNeg10s,Tradefeedr mid price 10s before the trade
MidNeg5s,Tradefeedr mid price 5s before the trade
MidNeg4s,Tradefeedr mid price 4s before the trade
MidNeg3s,Tradefeedr mid price 3s before the trade
MidNeg2s,Tradefeedr mid price 2s before the trade
MidNeg1s,Tradefeedr mid price 1s before the trade
MidNeg500ms,Tradefeedr mid price 500ms before the trade
MidNeg250ms,Tradefeedr mid price 250ms before the trade
MidNeg100ms,Tradefeedr mid price 100ms before the trade
Mid0,Tradefeedr mid price at the time immediately preceding the TradeTime
Mid50ms,Tradefeedr mid price 50ms after the TradeTime
Mid100ms,Tradefeedr mid price 100ms after the TradeTime
Mid250ms,Tradefeedr mid price 250ms after the TradeTime
Mid500ms,Tradefeedr mid price 500ms after the TradeTime
Mid1s,Tradefeedr mid price 1s after the TradeTime
Mid2s,Tradefeedr mid price 2s after the TradeTime
Mid3s,Tradefeedr mid price 3s after the TradeTime
Mid4s,Tradefeedr mid price 4s after the TradeTime
Mid5s,Tradefeedr mid price 5s after the TradeTime
Mid10s,Tradefeedr mid price 10s after the TradeTime
Mid15s,Tradefeedr mid price 15s after the TradeTime
Mid20s,Tradefeedr mid price 20s after the TradeTime
Mid30s,Tradefeedr mid price 30s after the TradeTime
Mid45s,Tradefeedr mid price 45s after the TradeTime
Mid1m,Tradefeedr mid price 1m after the TradeTime
Mid2m,Tradefeedr mid price 2m after the TradeTime
Mid3m,Tradefeedr mid price 3m after the TradeTime
Mid4m,Tradefeedr mid price 4m after the TradeTime
Mid5m,Tradefeedr mid price 5m after the TradeTime
Mid10m,Tradefeedr mid price 10m after the TradeTime
DecayNeg10s,Change in Tradefeedr mid price  10s before the TradeTime
DecayNeg5s,Change in Tradefeedr mid price  5s before the TradeTime
DecayNeg4s,Change in Tradefeedr mid price  4s before the TradeTime
DecayNeg3s,Change in Tradefeedr mid price  3s before the TradeTime
DecayNeg2s,Change in Tradefeedr mid price  2s before the TradeTime
DecayNeg1s,Change in Tradefeedr mid price  1s before the TradeTime
DecayNeg500ms,Change in Tradefeedr mid price  500ms before the TradeTime
DecayNeg250ms,Change in Tradefeedr mid price  250ms before the TradeTime
DecayNeg100ms,Change in Tradefeedr mid price  100ms before the TradeTime
Decay0,Always zero
Decay50ms,Change in Change inTradefeedr mid price 50ms after the TradeTime
Decay100ms,Change in Change inTradefeedr mid price 100ms after the TradeTime
Decay250ms,Change in Change inTradefeedr mid price 250ms after the TradeTime
Decay500ms,Change in Change inTradefeedr mid price 500ms after the TradeTime
Decay1s,Change in Change inTradefeedr mid price 1s after the TradeTime
Decay2s,Change in Change inTradefeedr mid price 2s after the TradeTime
Decay3s,Change in Change inTradefeedr mid price 3s after the TradeTime
Decay4s,Change in Change inTradefeedr mid price 4s after the TradeTime
Decay5s,Change in Change inTradefeedr mid price 5s after the TradeTime
Decay10s,Change in Change inTradefeedr mid price 10s after the TradeTime
Decay15s,Change in Change inTradefeedr mid price 15s after the TradeTime
Decay20s,Change in Change inTradefeedr mid price 20s after the TradeTime
Decay30s,Change in Change inTradefeedr mid price 30s after the TradeTime
Decay45s,Change in Change inTradefeedr mid price 45s after the TradeTime
Decay1m,Change in Change inTradefeedr mid price 1m after the TradeTime
Decay2m,Change in Change inTradefeedr mid price 2m after the TradeTime
Decay3m,Change in Change inTradefeedr mid price 3m after the TradeTime
Decay4m,Change in Change inTradefeedr mid price 4m after the TradeTime
Decay5m,Change in Change inTradefeedr mid price 5m after the TradeTime
Decay10m,Change in Change inTradefeedr mid price 10m after the TradeTime
DecayPMNeg10s,Change in Tradefeedr mid price in $/m 10s  before the TradeTime
DecayPMNeg5s,Change in Tradefeedr mid price in $/m 5s  before the TradeTime
DecayPMNeg4s,Change in Tradefeedr mid price in $/m 4s  before the TradeTime
DecayPMNeg3s,Change in Tradefeedr mid price in $/m 3s  before the TradeTime
DecayPMNeg2s,Change in Tradefeedr mid price in $/m 2s  before the TradeTime
DecayPMNeg1s,Change in Tradefeedr mid price in $/m 1s  before the TradeTime
DecayPMNeg500ms,Change in Tradefeedr mid price in $/m 500ms  before the TradeTime
DecayPMNeg250ms,Change in Tradefeedr mid price in $/m 250ms  before the TradeTime
DecayPMNeg100ms,Change in Tradefeedr mid price in $/m 100ms  before the TradeTime
DecayPM0,Always zero
DecayPM50ms,Change in Tradefeedr mid price in $/m 50ms  after the TradeTime
DecayPM100ms,Change in Tradefeedr mid price in $/m 100ms  after the TradeTime
DecayPM250ms,Change in Tradefeedr mid price in $/m 250ms  after the TradeTime
DecayPM500ms,Change in Tradefeedr mid price in $/m 500ms  after the TradeTime
DecayPM1s,Change in Tradefeedr mid price in $/m 1s  after the TradeTime
DecayPM2s,Change in Tradefeedr mid price in $/m 2s  after the TradeTime
DecayPM3s,Change in Tradefeedr mid price in $/m 3s  after the TradeTime
DecayPM4s,Change in Tradefeedr mid price in $/m 4s  after the TradeTime
DecayPM5s,Change in Tradefeedr mid price in $/m 5s  after the TradeTime
DecayPM10s,Change in Tradefeedr mid price in $/m 10s  after the TradeTime
DecayPM15s,Change in Tradefeedr mid price in $/m 15s  after the TradeTime
DecayPM20s,Change in Tradefeedr mid price in $/m 20s  after the TradeTime
DecayPM30s,Change in Tradefeedr mid price in $/m 30s  after the TradeTime
DecayPM45s,Change in Tradefeedr mid price in $/m 45s  after the TradeTime
DecayPM1m,Change in Tradefeedr mid price in $/m 1m  after the TradeTime
DecayPM2m,Change in Tradefeedr mid price in $/m 2m  after the TradeTime
DecayPM3m,Change in Tradefeedr mid price in $/m 3m  after the TradeTime
DecayPM4m,Change in Tradefeedr mid price in $/m 4m  after the TradeTime
DecayPM5m,Change in Tradefeedr mid price in $/m 5m  after the TradeTime
DecayPM10m,Change in Tradefeedr mid price in $/m 10m  after the TradeTime
TradeQuantityUSD,USD Equivalent of TradeQuantity
SpreadPnL,Spread Paid in Child Order in USD
SpreadPnLPM,Spread Paid in Child Order in $/million traded
OrderQuantityBase,The  OrderQuantity in terms of the base currency
OrderQuantityUSD,USD Equivalent of OrderQuantity
ArrivalPrice,Tradefeedr mid-price at the time immediately preceding Arrival Time
LatencyMillis,TradeTime minus ArrivalTime expressed in milliseconds
```