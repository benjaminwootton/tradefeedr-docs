# Execution Stats

## Introduction

The `v1/fx/rfs/execution-stats` endpoint is designed to study general execution quality of the trades and their associated market impact. 

For example, in the notebook we show how you can use this endpoint to create a venue analysis. 
It includes the summarised spread paid and market impact generated by different liquidity providers split by the different platforms/ECNs the user trades on.

The endpoint allows you to query across the entire execution history. The query returns a table with the metrics (fields) selected by the user as columns. The rows are defined by `groupby` statements. 

## API Specification

The API endpoint requires a JSON object representing query logic similar to SQL and containing the following fields:

- `groupby` - which fields the results will be aggregated by
- `select`  - which fields should be returned in the end result. For example `SpreadPnLPM`. The full list of possible values is given below
- `filter`  - how the underlying data should be filtered

## Examples 

**Note**: For display purposes we have limited the number of rows to 5 and and columns to 10.

### Only `LP` in `groupby`

Refer to [RFS API](api-rfs/api-rfs.md) page for page for details on aggregation logic.

**Note:** Aggregation is different depending on `select` and `groupby` fields

In the example below we groupby `LP`, numerical fields such as `Price`,`Mid0` return `None` as we aggregate across `Symbol` and `Side`. 
The aggregation of these results do not return a meaningful result.

```python
```
## tradefeedr library
from tradefeedr_public_content.v1.generic.tradefeedr_api import TradefeedrApi

## need pandas to translate JSON results from API
import pandas as pd

## create API object
tf_api_object = TradefeedrApi(demo=True)

## options
options = {
    "groupby": [
        "LP",
    ],
    "select": [

        "TradeQuantityUSD", # sum
        "SpreadPnLPM",      # TradeQuantityUSD-weighted average
        "DecayPM1s",        # TradeQuantityUSD-weighted average
        "Symbol",           # cannot aggregate - returns None
        "ExecVenue",        # cannot aggregate - returns None
        "Mid0",             # cannot aggregate - returns None
        "Price",            # cannot aggregate - returns None
        {"function": "sum", "var": "TradeQuantityUSD", "name": "TotalVolume"},      # explicit aggregation function
        {"function": "avg", "var": "Price", "name": "AvgPrice"}                     # explicit aggregation function
    ],
    "filter": [
        #{"function": "within", "var": "Date", "pars": ["2014-01-01", "2021-11-30"]},
        {"function": "within", "var": "TradeTime", "transform": "time", "pars": ["12:00:00", "14:00:00"]},
        {"function": "in", "var": "Symbol", "pars": ["EURUSD", "USDJPY"]},
        {"function": "eq", "var": "ParentChild", "par": "Child"}
    ],
}

# this is api end-point which returns execution stats
endpoint = "v1/fx/rfs/execution-stats"

## call the API
response = tf_api_object.query_api(endpoint, options)

## translate API result into pandas dataframe
data_frame = pd.DataFrame(response["result"])
# data_frame = data_frame.set_index("LP")
data_frame
```
```
#### Results

![api_rfs_execution_stats_ex1.png](assets/images/api_rfs/execution_stats/api_rfs_execution_stats_ex1.png)

### Only `Symbol` and `Side` in `groupby`

Refer to [API RFS](api-rfs/api-rfs.md) page for page for details on aggregation logic.

In this case as we are applying a `groupby` by `Symbol` and `Side`.`Price` and `Mid0` are specified in `select` query and they are returned as weighted average across `groupby` categories with `TradeQuantityUSD` being the weights. In this case the results are not `None` as we are not aggregating across different `Symbol` and `Side` values.

`ExecVenue` and `LP` are still returned as `None` because there is not consistent way to aggregate symbolic variable such as `ExecVenue` or `LP` across e.g. all EURUSD trades. 

```python
```
## tradefeedr library
from tradefeedr_public_content.v1.generic.tradefeedr_api import TradefeedrApi

## need pandas to translate JSON results from API
import pandas as pd

## create API object
tf_api_object = TradefeedrApi(demo=True)

## options
options = {
    "groupby": [
        "Symbol",
        "Side"
    ],
    "select": [
        "TradeQuantityUSD",
        "SpreadPnLPM",
        "DecayPM1s",
        "ExecVenue",
        "LP",
        "Mid0",
        "Price",
        {"function": "sum", "var": "TradeQuantityUSD", "name": "TotalVolume"},
        {"function": "avg", "var": "Price", "name": "AvgPrice"}
    ],
    "filter": [
        {"function": "within", "var": "Date", "pars": ["2014-01-01", "2021-11-30"]},
        {"function": "within", "var": "TradeTime", "transform": "time", "pars": ["12:00:00", "14:00:00"]},
        {"function": "in", "var": "Symbol", "pars": ["EURUSD", "USDJPY"]}
    ],
}

# this is api end-point which returns execution stats
endpoint = "v1/fx/rfs/execution-stats"

## call the API
response = tf_api_object.query_api(endpoint, options)

## translate API result into pandas dataframe
data_frame = pd.DataFrame(response["result"])
# data_frame = data_frame.set_index("Symbol")
data_frame
```
```
#### Results

![api_rfs_execution_stats_ex2.png](assets/images/api_rfs/execution_stats/api_rfs_execution_stats_ex2.png)

### Spread Paid and Market Impact

In this example we conduct a venue analysis where we group the results by `LP`, `ExecVenue`, `Symbol` and `OrderStatus` . This is to review the overall quality of the liquidity of each LP across the different platforms/ECNs.
It is also important what the market does after fill. `DecayPM1s` measures side-adjusted move in $/m. 

Positive number means that that market mid goes up after buy fill and down after sell fill.
Grouping by `OrderStatus` allows you to differentiate the markout curves between filled and rejected trades.

```python
```
## tradefeedr library
from tradefeedr_public_content.v1.generic.tradefeedr_api import TradefeedrApi

## need pandas to translate JSON results from API
import pandas as pd

## create API object
tf_api_object = TradefeedrApi(demo=True)

## options
options = {
    "groupby": [
        "LP",          # this is the actual LP for the child order -  can be same as AlgoVendor
        "ExecVenue",   # venue where trading takes place -  can be "CboeFX", "EuronextFX"
        "Symbol",
        "OrderStatus"
    ],
    "select": [
        "TradeQuantityUSD",
        "SpreadPnLPM", # spread paid in $/m, see definition in the end of the doc
        "DecayPM1s",
        "DecayPM5s",
        "DecayPM30s",
        "DecayPM1m",
        "DecayPM5m"
    ],
    "filter": [
        {"function": "eq", "var": "ParentChild", "par": "Child"},
        {"function": "within", "var": "TradeTime", "transform": "time", "pars": ["12:00:00", "14:00:00"]},
        {"function": "within", "var": "Date", "pars": ["2017-01-01", "2017-12-31"]},
        {"function": "like", "var": "Symbol", "par": "USD*"}
    ]
}

# this is api end-point which returns execution stats
endpoint = "v1/fx/rfs/execution-stats"

## call the API
response = tf_api_object.query_api(endpoint, options)

## translate API result into pandas dataframe
data_frame = pd.DataFrame(response["result"])
# data_frame = data_frame.set_index("LP")
data_frame
```
```
#### Results

![api_rfs_execution_stats_ex3.png](assets/images/api_rfs/execution_stats/api_rfs_execution_stats_ex3.png)

#### Figure

```python
```
# import plotly libary
import plotly.express as px

# Plot figure
fig = px.scatter(data_frame, x="LP", y=["SpreadPnLPM"], color="Symbol",
                 title="SpreadPnL by Symbol")
fig.show()
```
```
###  Two categories (`eqx` function) 

`eqx` returns the variable if the input is equal to this variable and  `Other` if the equality is not satistfied. 

This can be utilised by RFS user to performance broker review style analysis. The analysis can be provided to the broker to show their own stats together with aggregated stats of all other brokers. This way you can hide proprietary details but provide broker with some information.

This can also be used by the LP to do internal analysis of one their account versus everything else.

```python
```
## tradefeedr library
from tradefeedr_public_content.v1.generic.tradefeedr_api import TradefeedrApi

## need pandas to translate JSON results from API
import pandas as pd

## create API object
tf_api_object = TradefeedrApi(demo=True)

## options
options = {
    "groupby": [
        {"function": "eqx", "var": "LP", "par": "LP1"},
        {"function": "eqx", "var": "Symbol", "par": "EURUSD"}
    ],
    "select": [
        {"function": "min", "var": "SpreadPnLPM", "name": "MinSpread"},
        {"function": "max", "var": "SpreadPnLPM", "name": "MaxSpread"},
        {"function": "count", "var": "Symbol", "name": "Count"},
        {"function": "sum", "var": "TradeQuantityUSD", "name": "TotalVolume"}
    ],
    "filter": [
        {"function": "within", "var": "Date", "pars": ["2014-01-01", "2021-11-30"]}
    ]
}

# this is api end-point which returns execution stats
endpoint = "v1/fx/rfs/execution-stats"

## call the API
response = tf_api_object.query_api(endpoint, options)

## translate API result into pandas dataframe
data_frame = pd.DataFrame(response["result"])
# data_frame = data_frame.set_index("LP")
data_frame
```
```
#### Results

![api_rfs_execution_stats_ex4.png](assets/images/api_rfs/execution_stats/api_rfs_execution_stats_ex4.png)

### Two categories (`eq` masking) 

`eq` returns `True` or `False`, in contrast to the `eqx` returns the variable if `True` else Other if `False`.
This groups the dataset into two categories. Like the above example it can be used for broker review analysis.

```python
```
## tradefeedr library
from tradefeedr_public_content.v1.generic.tradefeedr_api import TradefeedrApi

## need pandas to translate JSON results from API
import pandas as pd

## create API object
tf_api_object = TradefeedrApi(demo=True)

## options
options = {
    "groupby": [
        {"function": "eq", "var": "LP", "par": "LP1"},
        {"function": "eq", "var": "Symbol", "par": "EURUSD"}
    ],
    "select": [
        {"function": "min", "var": "SpreadPnLPM", "name": "MinSpread"},
        {"function": "max", "var": "SpreadPnLPM", "name": "MaxSpread"},
        {"function": "count", "var": "Symbol", "name": "Count"},
        {"function": "sum", "var": "TradeQuantityUSD", "name": "TotalVolume"}
    ],
    "filter": [
        {"function": "within", "var": "Date", "pars": ["2014-01-01", "2021-11-30"]}
    ]
}

# this is api end-point which returns execution stats
endpoint = "v1/fx/rfs/execution-stats"

## call the API
response = tf_api_object.query_api(endpoint, options)

## translate API result into pandas dataframe
data_frame = pd.DataFrame(response["result"])
# data_frame = data_frame.set_index("LP")
data_frame
```
```
#### Results

![api_rfs_execution_stats_ex5.png](assets/images/api_rfs/execution_stats/api_rfs_execution_stats_ex5.png)

### Percentile 

`percentile` returns the x percentile of the specified column.

In this example we return the value corresponding to the 25th, 50th, 75th, 90th and 100th percentile of `SpreadPnLPM`.
You can query various percentiles in the `select` parameter and analyse distribution of the chosen metric.

**Warning**: This function is computationally intensive running on a large data set will results in a slower response time.

```python
```
## tradefeedr library
from tradefeedr_public_content.v1.generic.tradefeedr_api import TradefeedrApi

## need pandas to translate JSON results from API
import pandas as pd

## create API object
tf_api_object = TradefeedrApi(demo=True)

## options
options = {
    "groupby": [
        "LP"
    ],
    "select": [
        "TradeQuantityUSD", # sum
        "SpreadPnLPM",      # TradeQuantityUSD-weighted average
        "DecayPM1s",        # TradeQuantityUSD-weighted average
        {"name": "SpreadPnLPM_Pct25", "function": "percentile", "var": "SpreadPnLPM", "par": 25},
        {"name": "SpreadPnLPM_Pct50", "function": "percentile", "var": "SpreadPnLPM", "par": 50},
        {"name": "SpreadPnLPM_Pct75", "function": "percentile", "var": "SpreadPnLPM", "par": 75},
        {"name": "SpreadPnLPM_Pct90", "function": "percentile", "var": "SpreadPnLPM", "par": 90},
        {"name": "SpreadPnLPM_Pct100", "function": "percentile", "var": "SpreadPnLPM", "par": 100}
    ],
    "filter": [
        {"function": "within", "var": "Date", "pars": ["2017-01-01", "2017-04-01"]},
        {"function": "within", "var": "TradeTime", "transform": "time", "pars": ["12:00:00", "14:00:00"]}
    ]
}

# this is api end-point which returns execution stats
endpoint = "v1/fx/rfs/execution-stats"

## call the API
response = tf_api_object.query_api(endpoint, options)

## translate API result into pandas dataframe
data_frame = pd.DataFrame(response["result"])
# data_frame = data_frame.set_index("LP")
data_frame
```
```
#### Results

![api_rfs_execution_stats_ex6.png](assets/images/api_rfs/execution_stats/api_rfs_execution_stats_ex6.png)

#### Figure

```python
```
# import plotly libary
import plotly.express as px

# Modify dataframe
data_frame = data_frame.set_index("LP")

# Plot figure
fig = px.bar(data_frame.iloc[:,3:], barmode="group", title="SpreadPnLPM Percentile Plot")
fig.show()
```
```
### Rank Percentile 

The `rank_percentile` function transforms the target column into a value in the range of [0;100].

This is applied in the `filter` option. The user can use this function to apply an outlier filtering. `DecayPM1s` results are filtered to only select values which fall within the 10th-90th percentile range.

**Warning**: This function is computationally intensive running on a large data set will results in a slower response time.

```python
```
## tradefeedr library
from tradefeedr_public_content.v1.generic.tradefeedr_api import TradefeedrApi

## need pandas to translate JSON results from API
import pandas as pd

## create API object
tf_api_object = TradefeedrApi(demo=True)

## options
options = {
    "groupby": [
        "LP"
    ],
    "select": [
        "TradeQuantityUSD", # sum
        "SpreadPnLPM",      # TradeQuantityUSD-weighted average
        "DecayPM1s",        # TradeQuantityUSD-weighted average
    ],
    "filter": [
        {"function": "within", "var": "Date", "pars": ["2017-01-01", "2017-04-01"]},
        {"function": "within", "var": "TradeTime", "transform": "time", "pars": ["12:00:00", "14:00:00"]},
        {"function": "within", "var": "DecayPM1s", "transform": "rank_percentile", "pars": [10, 90]}
    ]
}

# this is api end-point which returns execution stats
endpoint = "v1/fx/rfs/execution-stats"

## call the API
response = tf_api_object.query_api(endpoint, options)

## translate API result into pandas dataframe
data_frame = pd.DataFrame(response["result"])
# data_frame = data_frame.set_index("LP")
data_frame
```
```
#### Results

![api_rfs_execution_stats_ex7.png](assets/images/api_rfs/execution_stats/api_rfs_execution_stats_ex7.png)

#### Figure

```python
```
# import plotly libary
import plotly.express as px

# Plot figure
fig = px.bar(data_frame, x="LP", y="DecayPM1s", title="Rank Percentile Plot")
fig.update_layout(xaxis={"categoryorder":"total descending"})
fig.show()
```
```
### Histogram (Buckets)

Group modification function `hist` (stands for histogram buckets) splits the incoming variable range (`DecayPM1m` in the below example) into a number of buckets of the same size.  Variables in the `select` operator are aggregated within those buckets. 

**Note**: The resulting column created by applying `hist` in the groupby, returns the middle value of the bucket.

```python
```
## tradefeedr library
from tradefeedr_public_content.v1.generic.tradefeedr_api import TradefeedrApi

## need pandas to translate JSON results from API
import pandas as pd

## create API object
tf_api_object = TradefeedrApi(demo=True)

## options
options = {
    "groupby": [
        {"function": "hist", "var": "DecayPM1m", "par": 10}
    ],
    "select": [
        {"function": "min", "var": "DecayPM1m", "name": "MinDecayPM1m"},
        {"function": "max", "var": "DecayPM1m", "name": "MaxDecayPM1m"},
        {"function": "count", "var": "Symbol", "name": "Count"},
        {"function": "min", "var": "TradeQuantityUSD", "name": "TotalVolume"}
    ],
    "filter": [
        {"function": "within", "var": "Date", "pars": ["2014-01-01", "2021-11-30"]},
        {"function": "eq", "var": "ParentChild", "par": "Child"},    # only consider child orders which represent the actual trading
        {"function": "eq", "var": "OrderStatus", "par": "F"},        # only consider fills
        {"function": "gt", "var": "TradeQuantityUSD", "par": 0},     # ignore order with zero traded quantity
        {"function": "eq", "var": "Symbol", "par": "EURUSD"}
    ],
}

# this is api end-point which returns execution stats
endpoint = "v1/fx/rfs/execution-stats"

## call the API
response = tf_api_object.query_api(endpoint, options)

## translate API result into pandas dataframe
data_frame = pd.DataFrame(response["result"])
# data_frame = data_frame.set_index("DecayPM1m")
data_frame
```
```
#### Results

![api_rfs_execution_stats_ex8.png](assets/images/api_rfs/execution_stats/api_rfs_execution_stats_ex8.png)

#### Figure

```python
```
# import plotly libary
import plotly.express as px

# Plot figure
fig = px.bar(data_frame, x="DecayPM1m", y="Count", barmode="group",
             title="Histogram DecayPM1m")
fig.show()
```
```
## Field Definitions

Refer to [Analytics RFS](../analytics/rfs.md) page for details and formula.

```csv
Name,Description
SizeBucket ,"Translation of TradeQuantityUSD into USD size bucket in human readable format like  0-1=, 1-3,  3-5, 5-10 etc 0-1 means that the TradeQuantityUSD is between 0 and $1mil etc "
Date,Date corresponding to TradeTime
TradeTime,TradeTime - Time (GMT) when the trade was filled
Symbol,Currency pair. For example EURUSD.
Side,"Trade side. ""B” for buy and ""S” for sell."
Price,Execution Price for child fills.
TradeID,"Unique identifier for a trading event. Event can fill, order submission, reject or other event related to trading workflow"
TradeQuantity,Traded quantity expressed in TradeCurrency
TradeCcy,"Denomination Currency for TradeQuantity and OrderQuantity. For example
    EUR."
ExecVenue,Execution Venue where the execution is taking place
LP,Executing LP - counterparty to the trade.
LPStream,Pricing Stream of Executing LP. For example No-Last-look
LiqPool,"Pool executing LP belongs to. Typically, liquidity pool is a group of LP aggregated according to some common logic by the end user."
ArrivalTime,ArrivalTime is the time when trade request was sent. It is GMT time
QuoteTime,The time of the quote as labelled by executing LP. Quote time should generally be before the Arrival Time.
AlgoName,Name of the Algo.
ParentChild,"Equal to either =""Parent"" or ""Child""  and determines whether the rows is ""Parent"" or ""Child"" row. ""Parent rows are the events generated by a sweep order, and the child row reflect the fills."
OrderQuantity,"Total  quantity ordered. For example: 10,000,000. In units of TradeCurrency"
OrderStatus,"Status of an order it can be fill ""F"", reject ""R"", submitted ""S"" or cancelled ""C"""
OrderType,For Child rows and fills it is normally Passive/Active/Mid or Limit/Market classification
OrderPrice,Price of the order. Typical observed screen prices at the time of order placement. Useful to access the slippage.
OrderTTL,"Normally for  Child rows. FOK (Fill or Kill), AON, IOC, GTC, GTD"
LimitPrice,"For ""Parent” rows it the limit price as instructed by algo. For ""Child” rows it is the whatever is the LimitPrice submitted by AlgoVendor while trading on an ECN"
ParentOrderID,ParentOrderID for each order. Globally unique to each submitting LP
ParentOrderID2,Sub ID relating to the ParentOrderID used in sweep orders
Account,Name of the underlying client this ParentOrderID executed on behalf of
SubAccount,SubAccount associated with this ParentOrderID
TradeReason,"Any descriptive Trade Reason. Stop, Internal, External, RiskOverflow etc. User specific"
Trader,The name of a trader associated with this ParentOrderID
BaseCcy,The base currency of the pair
TradeQuantityBase,TradeQuantity in the base currency of the Symbol
MidNeg10s,Tradefeedr mid price 10s before the trade
MidNeg5s,Tradefeedr mid price 5s before the trade
MidNeg4s,Tradefeedr mid price 4s before the trade
MidNeg3s,Tradefeedr mid price 3s before the trade
MidNeg2s,Tradefeedr mid price 2s before the trade
MidNeg1s,Tradefeedr mid price 1s before the trade
MidNeg500ms,Tradefeedr mid price 500ms before the trade
MidNeg250ms,Tradefeedr mid price 250ms before the trade
MidNeg100ms,Tradefeedr mid price 100ms before the trade
Mid0,Tradefeedr mid price at the time immediately preceding the TradeTime
Mid50ms,Tradefeedr mid price 50ms after the TradeTime
Mid100ms,Tradefeedr mid price 100ms after the TradeTime
Mid250ms,Tradefeedr mid price 250ms after the TradeTime
Mid500ms,Tradefeedr mid price 500ms after the TradeTime
Mid1s,Tradefeedr mid price 1s after the TradeTime
Mid2s,Tradefeedr mid price 2s after the TradeTime
Mid3s,Tradefeedr mid price 3s after the TradeTime
Mid4s,Tradefeedr mid price 4s after the TradeTime
Mid5s,Tradefeedr mid price 5s after the TradeTime
Mid10s,Tradefeedr mid price 10s after the TradeTime
Mid15s,Tradefeedr mid price 15s after the TradeTime
Mid20s,Tradefeedr mid price 20s after the TradeTime
Mid30s,Tradefeedr mid price 30s after the TradeTime
Mid45s,Tradefeedr mid price 45s after the TradeTime
Mid1m,Tradefeedr mid price 1m after the TradeTime
Mid2m,Tradefeedr mid price 2m after the TradeTime
Mid3m,Tradefeedr mid price 3m after the TradeTime
Mid4m,Tradefeedr mid price 4m after the TradeTime
Mid5m,Tradefeedr mid price 5m after the TradeTime
Mid10m,Tradefeedr mid price 10m after the TradeTime
DecayNeg10s,Change in Tradefeedr mid price  10s before the TradeTime
DecayNeg5s,Change in Tradefeedr mid price  5s before the TradeTime
DecayNeg4s,Change in Tradefeedr mid price  4s before the TradeTime
DecayNeg3s,Change in Tradefeedr mid price  3s before the TradeTime
DecayNeg2s,Change in Tradefeedr mid price  2s before the TradeTime
DecayNeg1s,Change in Tradefeedr mid price  1s before the TradeTime
DecayNeg500ms,Change in Tradefeedr mid price  500ms before the TradeTime
DecayNeg250ms,Change in Tradefeedr mid price  250ms before the TradeTime
DecayNeg100ms,Change in Tradefeedr mid price  100ms before the TradeTime
Decay0,Always zero
Decay50ms,Change in Change inTradefeedr mid price 50ms after the TradeTime
Decay100ms,Change in Change inTradefeedr mid price 100ms after the TradeTime
Decay250ms,Change in Change inTradefeedr mid price 250ms after the TradeTime
Decay500ms,Change in Change inTradefeedr mid price 500ms after the TradeTime
Decay1s,Change in Change inTradefeedr mid price 1s after the TradeTime
Decay2s,Change in Change inTradefeedr mid price 2s after the TradeTime
Decay3s,Change in Change inTradefeedr mid price 3s after the TradeTime
Decay4s,Change in Change inTradefeedr mid price 4s after the TradeTime
Decay5s,Change in Change inTradefeedr mid price 5s after the TradeTime
Decay10s,Change in Change inTradefeedr mid price 10s after the TradeTime
Decay15s,Change in Change inTradefeedr mid price 15s after the TradeTime
Decay20s,Change in Change inTradefeedr mid price 20s after the TradeTime
Decay30s,Change in Change inTradefeedr mid price 30s after the TradeTime
Decay45s,Change in Change inTradefeedr mid price 45s after the TradeTime
Decay1m,Change in Change inTradefeedr mid price 1m after the TradeTime
Decay2m,Change in Change inTradefeedr mid price 2m after the TradeTime
Decay3m,Change in Change inTradefeedr mid price 3m after the TradeTime
Decay4m,Change in Change inTradefeedr mid price 4m after the TradeTime
Decay5m,Change in Change inTradefeedr mid price 5m after the TradeTime
Decay10m,Change in Change inTradefeedr mid price 10m after the TradeTime
DecayPMNeg10s,Change in Tradefeedr mid price in $/m 10s  before the TradeTime
DecayPMNeg5s,Change in Tradefeedr mid price in $/m 5s  before the TradeTime
DecayPMNeg4s,Change in Tradefeedr mid price in $/m 4s  before the TradeTime
DecayPMNeg3s,Change in Tradefeedr mid price in $/m 3s  before the TradeTime
DecayPMNeg2s,Change in Tradefeedr mid price in $/m 2s  before the TradeTime
DecayPMNeg1s,Change in Tradefeedr mid price in $/m 1s  before the TradeTime
DecayPMNeg500ms,Change in Tradefeedr mid price in $/m 500ms  before the TradeTime
DecayPMNeg250ms,Change in Tradefeedr mid price in $/m 250ms  before the TradeTime
DecayPMNeg100ms,Change in Tradefeedr mid price in $/m 100ms  before the TradeTime
DecayPM0,Always zero
DecayPM50ms,Change in Tradefeedr mid price in $/m 50ms  after the TradeTime
DecayPM100ms,Change in Tradefeedr mid price in $/m 100ms  after the TradeTime
DecayPM250ms,Change in Tradefeedr mid price in $/m 250ms  after the TradeTime
DecayPM500ms,Change in Tradefeedr mid price in $/m 500ms  after the TradeTime
DecayPM1s,Change in Tradefeedr mid price in $/m 1s  after the TradeTime
DecayPM2s,Change in Tradefeedr mid price in $/m 2s  after the TradeTime
DecayPM3s,Change in Tradefeedr mid price in $/m 3s  after the TradeTime
DecayPM4s,Change in Tradefeedr mid price in $/m 4s  after the TradeTime
DecayPM5s,Change in Tradefeedr mid price in $/m 5s  after the TradeTime
DecayPM10s,Change in Tradefeedr mid price in $/m 10s  after the TradeTime
DecayPM15s,Change in Tradefeedr mid price in $/m 15s  after the TradeTime
DecayPM20s,Change in Tradefeedr mid price in $/m 20s  after the TradeTime
DecayPM30s,Change in Tradefeedr mid price in $/m 30s  after the TradeTime
DecayPM45s,Change in Tradefeedr mid price in $/m 45s  after the TradeTime
DecayPM1m,Change in Tradefeedr mid price in $/m 1m  after the TradeTime
DecayPM2m,Change in Tradefeedr mid price in $/m 2m  after the TradeTime
DecayPM3m,Change in Tradefeedr mid price in $/m 3m  after the TradeTime
DecayPM4m,Change in Tradefeedr mid price in $/m 4m  after the TradeTime
DecayPM5m,Change in Tradefeedr mid price in $/m 5m  after the TradeTime
DecayPM10m,Change in Tradefeedr mid price in $/m 10m  after the TradeTime
TradeQuantityUSD,USD Equivalent of TradeQuantity
SpreadPnL,Spread Paid in Child Order in USD
SpreadPnLPM,Spread Paid in Child Order in $/million traded
OrderQuantityBase,The  OrderQuantity in terms of the base currency
OrderQuantityUSD,USD Equivalent of OrderQuantity
ArrivalPrice,Tradefeedr mid-price at the time immediately preceding Arrival Time
LatencyMillis,TradeTime minus ArrivalTime expressed in milliseconds
```

### Aggreggation Functions (for `select` if `groupby` is present)

```csv
Function,Description,Example
sum,sum,"{""function"":""sum"",""var"":""TradeQuantityUSD"",""name"":""TotalVolume""},"
avg,average,"{""function"":""avg"",""var"":""TradeQuantityUSD"",""name"":""AvgTradeSize""}"
dev,standard deviation,"{""function"":""dev"",""var"":""TradeQuantityUSD"",""name"":""DevTotalSize""},"
max,maximum,"{""function"":""max"",""var"":""TradeQuantityUSD"",""name"":""MaxTradeSize""},"
min,minimum,"{""function"":""min"",""var"":""TradeQuantityUSD"",""name"":""MinTradeSize""},"
count,count,"{""function"":""count"",""var"":""TradeQuantityUSD"",""name"":""NumberOfTrades""},"
first,first observation,"{""function"":""first"",""var"":""TradeTime"",""name"":""FirstTime""}"
last,last observation,"{""function"":""last"", ""var"":""TradeTime"",""name"":""LastTime""}"
percentile,returns the x percentile of the specified column	,"{""function"": ""percentile"", ""var"": ""SpreadPnLPM"", ""par"": 90}"
```

### Modification Functions (for `filter` and `groupby` )

```csv
Function,Description,Example
eqx,"applied to sting variables,returns the value of parament if variable is equal to parameter and “Other” otherwise","{""function"":""eqx"",""par"":""LP1"",""var"":""LP""}"
bar,"rounds the variable down to the nearest multiple of the parameter, used to group to generate equal spaced buckets","{""function"":""bar"",""par"":""10"",""transform"":""minute"",""var"":""TradeTime""}"
minute,take the minute component from the variable,"{""function"":""bar"",""par"":""10"",""transform"":""minute"",""var"":""TradeTime""}"
in,"returns True if the variable is in the List and False otherwise, mainly for filters","{""function"":""in"",""var"":""Symbol"",""pars"":[""EURUSD"",""USDJPY""]},"
within,"within, variable within a provided range","{""function"":""within"",""var"":""date"",""pars"":[""2014-01-01"",""2021-11-30""]},"
gt,return True if the variable is greater than its parameter and False otherwise,"{""function"":""gt"",""var"":""TradeQuantityUSD"",""par"":1000000}, # greater than"
lt,return True if the variable is less than its paramer and False otherwise,"{""function"":""lt"",""var"":""SpreadPnLPM"",""par"":300}, # less than"
eq,returns True is the variable is equal to function parameter and false otherwise,"{""function"":""eq"",""var"":""Symbol"",""par"":""EURUSD""}"
hist,"split the variable into categories with N equally spaced buckets, typically used in group-by to produce histograms","{""function"":""hist"",""var"":""SpreadPnLPM"",""par"":""10""}"
hist_label,"split the variable into categories with N equally spaced buckets, function returns the bucket with the bucket number","{""function"":""hist_label"",""var"":""SpreadPnLPM"",""par"":""10""}"
hist_range,"split the variable into categories with N equally spaced buckets, function returns the range of the bucket","{""function"":""hist_range"",""var"":""SpreadPnLPM"",""par"":""10""}"
hist_index,"split the variable into categories with N equally spaced buckets, function returns the index of the bucket","{""function"":""hist_index"",""var"":""SpreadPnLPM"",""par"":""10""}"
like,matches string based on wild card pattern,"{""function"":""like"",""var"":""Symbol"",""pars"":""*USD""}"
not_eq,not equal. To exclude variables,"{""function"":""not_eq"",""var"":""Symbol"",""par"":""EURUSD""}"
not_in,"not in. returns False if the variable is in the List and True otherwise, mainly for filters","{""function"":""not_in"",""var"":""Symbol"",""pars"":[""EURUSD"",""USDJPY""]}"
rank_percentile,function transforms the target column into a value in the range of [0;100],"{""function"": ""within"", ""var"": ""DecayPM1s"", ""transform"": ""rank_percentile"", ""pars"": [10, 90]}"
diff_millis,"function takes two time columns x,y and performs an subtraction x-y results are in milliseconds","{""function"": ""within"", ""var"": [""TradeTime"", ""ArrivalTime""], ""transform"": ""diff_millis"", ""pars"": [0, 500]}"
diff_nanos,"function takes two time columns x,y and performs an subtraction x-y results are in nanoseconds","{""function"": ""within"", ""var"": [""TradeTime"", ""ArrivalTime""], ""transform"": ""diff_nanos"", ""pars"": [0, 500]}"
minus,"function takes two columns x,y and performs an subtraction x-y.","{""function"": ""within"", ""var"": [""OrderExecutionScore"", ""OrderReversalScore""], ""transform"": ""minus"", ""pars"": [0, 500]}"
plus,"function takes two columns x,y and performs an additon x+y.","{""function"": ""within"", ""var"": [""OrderExecutionScore"", ""OrderReversalScore""], ""transform"": ""plus"", ""pars"": [80, 150]}"
```